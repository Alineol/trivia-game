(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{104:function(e,t,a){},107:function(e,t){},108:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},147:function(e,t){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(36),c=a.n(s),i=(a(98),a(18)),o=a(9),l=a(3),u=(a(104),a(37)),m=a(16),d=a.n(m),p=a(25),h=a(7),f=a(8),b=a(11),v=a(10),g=a(87),E=a.n(g),y=a(88),k=a.n(y),N=a(30),O=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},w=function(e){return JSON.parse(localStorage.getItem(e))},j=function(e){return{type:"USER_TOKEN",state:e}},x=function(e){return{type:"GET_PLAYER",state:e}},S=function(e){return{type:"STOP_TIME",state:e}},T=function(e){return{type:"ANSWER_DISABLED",state:e}},A=function(e){return{type:"CHANGE_NEXT",state:e}},C=function(e){return{type:"RESET_SCORE",state:e}},q=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://opentdb.com/api_token.php?command=request",e.next=4,fetch("https://opentdb.com/api_token.php?command=request");case 4:return t=e.sent,e.next=7,t.json();case 7:return a=e.sent,O("token",a),e.abrupt("return",a.token);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();a(108);var R=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",userName:""},e.validadeEmailAndUserName=function(){var t=e.state,a=t.email,n=t.userName;return!(a.length>0&&n.length>0)},e.handlePlayClick=function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,s,c,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.email,s=n.userName,c=E()(r).toString(),i="https://www.gravatar.com/avatar/".concat(c),t.abrupt("return",a({gravatar:i,userName:s}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(u.a)({},n,r))},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.history,n=t.fetchApiQuestions,s=this.state,c=s.userName,o=s.email;return r.a.createElement("div",{className:"App-header"},r.a.createElement("img",{src:k.a,className:"App-logo",alt:"logo"}),r.a.createElement("section",{className:"login-section"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",null,r.a.createElement("input",{className:"email-input",type:"email",placeholder:"Email","data-testid":"input-gravatar-email",required:!0,onChange:this.handleChange,value:o,name:"email"}),r.a.createElement("input",{id:"UserName",className:"name-input",type:"text",placeholder:"Nome","data-testid":"input-player-name",required:!0,onChange:this.handleChange,value:c,name:"userName"}),r.a.createElement("button",{"data-testid":"btn-play",className:"btn-play",type:"button",onClick:Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handlePlayClick(n);case 2:a.push("/gamePage");case 3:case"end":return t.stop()}}),t)}))),disabled:this.validadeEmailAndUserName()},"Play"),r.a.createElement(i.b,{to:"/settings"},r.a.createElement("button",{"data-testid":"btn-settings",className:"btn-settings",type:"button"},"Configura\xe7\xf5es")))))}}]),a}(r.a.Component),_=Object(o.b)(null,(function(e){return{fetchApiQuestions:function(t){return e(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,s,c,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q();case 2:return n=t.sent,a(j(n)),t.prev=4,t.next=7,fetch("https://opentdb.com/api.php?amount=5&token=".concat(n));case 7:return r=t.sent,t.next=10,r.json();case 10:if(s=t.sent,3,3!==s.response_code){t.next=14;break}throw new Error;case 14:return t.abrupt("return",a(x({questions:s,name:e.userName,gravatar:e.gravatar})));case 17:return t.prev=17,t.t0=t.catch(4),t.next=21,q();case 21:return c=t.sent,t.next=24,fetch("https://opentdb.com/api.php?amount=5&token=".concat(c));case 24:return i=t.sent,t.next=27,i.json();case 27:return o=t.sent,t.abrupt("return",a(x({questions:o,name:e.userName,gravatar:e.gravatar})));case 29:case"end":return t.stop()}}),t,null,[[4,17]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(R),D=(a(112),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"settingsPage"},r.a.createElement("p",{"data-testid":"settings-title",className:"settings"},"Configura\xe7\xf5es do Jogo"))}}]),a}(r.a.Component)),I=a(57),B=a.n(I),P=(a(113),a(2)),F=a.n(P),G=a(56),M=a(90),J=a.n(M),U=(a(114),a(59),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={time:30},e.handleTime=function(){return setInterval((function(){e.setState((function(e){return{time:e.time-1}}))}),1e3)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=new Audio(J.a);e.play();var t=this.props,a=t.stopTimerAction,n=t.setNext,r=this.handleTime(e);this.setState({interval:r,audio:e}),a(!1),n(!1)}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.time,a=e.audio,n=this.props,r=n.setDisabled,s=n.setNext,c=n.setTimer;O("timer",t),c(t),0===t&&(a.pause(),r(!0),s(!0))}},{key:"componentWillUnmount",value:function(){var e=this.state,t=e.interval,a=e.audio;clearInterval(t),a.pause()}},{key:"checkTime",value:function(){var e=this.state.interval,t=this.props.setDisabled;return clearInterval(e),t(!0)}},{key:"ToRender",value:function(){var e=this.state,t=e.time,a=e.interval,n=this.props,s=n.stop,c=n.restartTimeFunction;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"timer"},r.a.createElement(G.a,{value:t,maxValue:30,text:String(t),background:!0,styles:Object(G.b)({backgroundColor:"white",pathColor:"#7816DE",textColor:"black",trailColor:"#F58A27",textSize:"50px"})})),!0===s?clearInterval(a):null,0===t?c(!1):null)}},{key:"render",value:function(){return r.a.createElement("div",null,this.ToRender())}}]),a}(r.a.Component)),L=(F.a.bool,F.a.func,Object(o.b)((function(e){return{stop:e.timer.stop}}),(function(e){return{setDisabled:function(t){return e(T(t))},setNext:function(t){return e(A(t))},setTimer:function(t){return e(function(e){return{type:"SET_TIME",state:e}}(t))},stopTimerAction:function(t){return e(S(t))}}}))(U)),W=(F.a.oneOfType([F.a.object]).isRequired,F.a.oneOfType([F.a.object]).isRequired,F.a.func.isRequired,F.a.bool.isRequired,F.a.func.isRequired,F.a.func.isRequired,F.a.bool.isRequired,F.a.number.isRequired,F.a.number.isRequired,F.a.func.isRequired,F.a.string.isRequired,F.a.string.isRequired,function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={questions:[],loading:!0,index:0,renderTimer:!0},e.callStopTimer=function(){return(0,e.props.stopTimerAction)(!0)},e.restartTimer=function(t){e.setState({renderTimer:t})},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.questions;this.setState({questions:e,loading:!1})}},{key:"getBollAnswers",value:function(e){var t=this,a=this.props.disabled,n=[].concat(Object(N.a)(e.incorrect_answers),[e.correct_answer]).sort(),s=e.incorrect_answers;return n.map((function(e){return e===s[0]?r.a.createElement("button",{type:"button",key:"1","data-testid":"wrong-answer-0",onClick:function(){t.handleAnswerClick("wrong")},className:"answerBtn",disabled:a},e):r.a.createElement("button",{type:"button",key:"0","data-testid":"correct-answer",onClick:function(){t.handleAnswerClick("rigth")},className:"btn_Answer",disabled:a},e)}))}},{key:"getMultipleAnswers",value:function(e){var t=this,a=this.props.disabled,n=[].concat(Object(N.a)(e.incorrect_answers),[e.correct_answer]).sort(),s=e.incorrect_answers;return n.map((function(n){if(n===e.correct_answer)return r.a.createElement("button",{key:"4",type:"button","data-testid":"correct-answer",onClick:function(){t.handleAnswerClick("rigth")},className:"btn_Answer",disabled:a},n);var c=s.indexOf(n,[0]);return r.a.createElement("button",{type:"button",key:c,"data-testid":"wrong-answer-".concat(c),className:"answerBtn",onClick:function(){t.handleAnswerClick("wrong")},disabled:a},n)}))}},{key:"questionToRender",value:function(){var e=this.state,t=e.questions,a=e.index,n=this.props.history;try{var s=t.results[a],c=s.type,i=s.category,o=s.question,l=B()(o),u=B()(i);return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{"data-testid":"question-category",dangerouslySetInnerHTML:{__html:u}},u.category),r.a.createElement("p",{"data-testid":"question-text",dangerouslySetInnerHTML:{__html:l}},l.question),r.a.createElement("div",{className:"answers-div","data-testid":"answer-options"},"multiple"===c?this.getMultipleAnswers(s):this.getBollAnswers(s)))}catch(m){n.push("/")}}},{key:"callDisabledDispatch",value:function(e){return(0,this.props.setDisabled)(e)}},{key:"callNextBtnDispatch",value:function(e){return(0,this.props.setNext)(e)}},{key:"handleAnswerClick",value:function(e){var t=this.state,a=t.index,n=t.questions,r=this.props,s=r.score,c=r.assertions,i=r.countScoreAction,o=r.name,l=r.urlGravatar;this.callStopTimer(),this.callDisabledDispatch(!0),this.callNextBtnDispatch(!0),this.setState({renderTimer:!1}),"rigth"===e&&function(e){var t=e.index,a=e.questions,n=e.score,r=e.assertions,s=e.countScoreAction,c=w("timer"),i=a.results[t].difficulty;"easy"===i?s({score:n+10+1*c,assertions:r+1}):"medium"===i?s({score:n+10+2*c,assertions:r+1}):"hard"===i&&s({score:n+10+3*c,assertions:r+1})}({index:a,questions:n,score:s,assertions:c,countScoreAction:i,name:o,urlGravatar:l})}},{key:"handleNextClick",value:function(e){var t=this.props.history;if(e<4)return this.setState({index:e+1,renderTimer:!0}),this.callDisabledDispatch(!1);var a=this.props,n=a.score,r=a.name,s=a.urlGravatar;return t.push("/feedback"),function(e){var t=JSON.parse(localStorage.getItem("ranking"));if(null===t)localStorage.setItem("ranking",JSON.stringify([e]));else{var a=[].concat(Object(N.a)(t),[e]);a.sort((function(e,t){return e.score>t.score?-1:e.score<t.score?1:0})),localStorage.setItem("ranking",JSON.stringify(a))}}({name:r,score:n,picture:s}),this.callDisabledDispatch(!1)}},{key:"renderNextBtn",value:function(){var e=this,t=this.state.index;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Respostas desabilitadas!"),r.a.createElement("button",{type:"button","data-testid":"btn-next",className:"nextBtn",onClick:function(){e.handleNextClick(t)}},"Next"))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.index,n=e.renderTimer,s=this.props.next;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"timer-div"},n?r.a.createElement(L,{render:n,restartTimeFunction:this.restartTimer}):null),t?r.a.createElement("span",null,"Caregando..."):this.questionToRender(a),s&&this.renderNextBtn())}}]),a}(r.a.Component)),H=Object(o.b)((function(e){return{questions:e.player.questions,disabled:e.answer.disabled,next:e.answer.nextBtn,score:e.player.score,assertions:e.player.assertions,name:e.player.name,urlGravatar:e.player.gravatarEmail}}),(function(e){return{stopTimerAction:function(t){return e(S(t))},setDisabled:function(t){return e(T(t))},setNext:function(t){return e(A(t))},countScoreAction:function(t){return e(function(e){return{type:"SET_SCORE",state:e}}(t))}}}))(W),K=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.urlGravatar,n=e.history,s=e.score;return r.a.createElement("div",{className:"game-pag"},r.a.createElement("header",{className:"game-header"},r.a.createElement("img",{src:a,d:"identicon",alt:"UserImage","data-testid":"header-profile-picture",className:"user-Image"}),r.a.createElement("h3",{"data-testid":"header-player-name",className:"playerName"},t),r.a.createElement("p",{"data-testid":"header-score",className:"playerScore"},s)),r.a.createElement("section",{className:"questions-section"},r.a.createElement(H,{history:n})))}}]),a}(r.a.Component),Q=Object(o.b)((function(e){return{name:e.player.name,urlGravatar:e.player.gravatarEmail,score:e.player.score}}))(K),V=(a(156),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).resetScoreFeedback=function(){(0,e.props.resetScoreAction)({score:0})},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.imgGravatar,a=e.userName,n=e.score,s=e.assertions;return r.a.createElement("div",{className:"feedbackPage"},r.a.createElement("header",{className:"feedback-header"},r.a.createElement("img",{src:"".concat(t),alt:"userImage","data-testid":"header-profile-picture",className:"userImg"}),r.a.createElement("p",{"data-testid":"header-player-name",className:"userName"},a),r.a.createElement("p",{"data-testid":"header-score",className:"userScore"},n)),r.a.createElement("section",{className:"feedback-section"},s<3?r.a.createElement("p",{"data-testid":"feedback-text",className:"feedText"},"Could be better..."):r.a.createElement("p",{"data-testid":"feedback-text",className:"feedText"},"Well Done!"),r.a.createElement("p",null,"Placar Final:"),r.a.createElement("p",{"data-testid":"feedback-total-score",className:"feedbackNumber"},n),r.a.createElement("p",null,"Voc\xea acertou:"),r.a.createElement("p",{"data-testid":"feedback-total-question",className:"feedbackNumber"},s),r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{type:"submit","data-testid":"btn-play-again",className:"feedbackBtn",onClick:this.resetScoreFeedback},"Play Again")),r.a.createElement(i.b,{to:"/ranking"},r.a.createElement("button",{type:"submit","data-testid":"btn-ranking",className:"feedbackBtn"},"Ranking"))))}}]),a}(r.a.Component)),X=Object(o.b)((function(e){return{userName:e.player.name,imgGravatar:e.player.gravatarEmail,score:e.player.score,assertions:e.player.assertions}}),(function(e){return{resetScoreAction:function(t){return e(C(t))}}}))(V),Y=(a(157),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).resetScoreFeedback=function(){(0,e.props.resetScoreAction)({score:0})},e}return Object(f.a)(a,[{key:"render",value:function(){var e=w("ranking");return e.sort((function(e,t){return e.score>t.score?-1:e.score<t.score?1:0})),r.a.createElement("div",{className:"rankingPage"},r.a.createElement("h1",{"data-testid":"ranking-title",className:"ranking"},"Ranking"),r.a.createElement("div",null,r.a.createElement("table",{className:"listRanking"},r.a.createElement("tr",{className:"list"},r.a.createElement("th",{className:"name"},"Nome"),r.a.createElement("th",{className:"score"},"Score"),r.a.createElement("th",{className:"avatar"},"Avatar")),r.a.createElement("div",{className:"table"},e.map((function(e,t){return r.a.createElement("div",{key:"item.name",className:"infoPlayer"},r.a.createElement("tr",{className:"infoIndividual"},r.a.createElement("th",{className:"nameRanking","data-testid":"player-name-".concat(t)},e.name),r.a.createElement("th",{className:"scoreRanking","data-testid":"player-score-".concat(t)},e.score),r.a.createElement("img",{className:"imgRanking",src:e.picture,alt:"Foto"})))}))))),r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{type:"submit","data-testid":"btn-go-home",onClick:this.resetScoreFeedback,className:"rankingButton"},"Play Again")))}}]),a}(r.a.Component)),z=Object(o.b)(null,(function(e){return{resetScoreAction:function(t){return e(C(t))}}}))(Y);function $(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/gamePage",render:function(e){return r.a.createElement(Q,e)}}),r.a.createElement(l.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(_,e)}}),r.a.createElement(l.a,{path:"/settings",component:D}),r.a.createElement(l.a,{path:"/feedback",component:X}),r.a.createElement(l.a,{path:"/ranking",component:z})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=a(24),ee=a(91),te=a(92),ae=a(6),ne={name:"",assertions:0,score:0,gravatarEmail:"",questions:""};var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PLAYER":return Object(ae.a)(Object(ae.a)({},e),{},{name:t.state.name,gravatarEmail:t.state.gravatar,questions:t.state.questions});case"SET_SCORE":return Object(ae.a)(Object(ae.a)({},e),{},{score:t.state.score,assertions:t.state.assertions});case"RESET_SCORE":return{score:0,assertions:0,gravatarEmail:"",questions:"",name:""};default:return e}};var se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_TOKEN":return t.state;default:return e}},ce={stop:!1,time:3,render:!0};var ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STOP_TIME":return Object(ae.a)(Object(ae.a)({},e),{},{stop:t.state});case"SET_TIME":return Object(ae.a)(Object(ae.a)({},e),{},{time:t.state});case"RENDER_TIME":return Object(ae.a)(Object(ae.a)({},e),{},{render:t.state});default:return e}},oe={disabled:!1,nextBtn:!1};var le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ANSWER_DISABLED":return Object(ae.a)(Object(ae.a)({},e),{},{disabled:t.state});case"CHANGE_NEXT":return Object(ae.a)(Object(ae.a)({},e),{},{nextBtn:t.state});default:return e}},ue=Object(Z.combineReducers)({player:re,token:se,timer:ie,answer:le}),me=Object(Z.createStore)(ue,Object(ee.composeWithDevTools)(Object(Z.applyMiddleware)(te.a))),de=me;window.Cypress&&(window.store=me),c.a.render(r.a.createElement(i.a,{basename:"/trivia-game"},r.a.createElement(o.a,{store:de},r.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},47:function(e,t){},48:function(e,t){},59:function(e,t,a){},75:function(e,t){},81:function(e,t){},88:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},90:function(e,t,a){e.exports=a.p+"static/media/bip.aa440353.mp3"},93:function(e,t,a){e.exports=a(158)},98:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.44e99bd6.chunk.js.map